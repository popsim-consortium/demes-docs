
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Command line interface &#8212; Demes manual</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="API Reference" href="api.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Demes manual</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="introduction.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="quickstart.html">
   Quickstart
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api.html">
   API Reference
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Command line interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="development.html">
   Development
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="CITATION.html">
   Citing Demes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="CHANGELOG.html">
   Changelog
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            demes 0.2.3.dev58
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/popsim-consortium/demes-python"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/popsim-consortium/demes-python/issues/new?title=Issue%20on%20page%20%2Fcli.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/popsim-consortium/demes-python/edit/main/docs/cli.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/cli.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demes-parse">
   demes parse
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demes-ms">
   demes ms
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Command line interface</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demes-parse">
   demes parse
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#demes-ms">
   demes ms
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="command-line-interface">
<span id="sec-cli"></span><h1>Command line interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">#</a></h1>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: demes [-h] [--version] {parse,ms} ...

Demes model parser and converter.

positional arguments:
  {parse,ms}
    parse     Parse models and write them to stdout in canonical form.
    ms        Build a Demes model using ms command line arguments.

options:
  -h, --help  show this help message and exit
  --version   show program&#39;s version number and exit
</pre></div>
</div>
<section id="demes-parse">
<span id="sec-cli-parse"></span><h2>demes parse<a class="headerlink" href="#demes-parse" title="Permalink to this headline">#</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: demes parse [-h] [-j | --ms REFERENCE_SIZE] [-s] filename

Parse models and write them to stdout. YAML is output by default, but JSON or
ms commands may instead be written. See options below.

positional arguments:
  filename             Filename of the model. The special value &#39;-&#39; may be
                       used to read from stdin. The file may be in YAML or
                       JSON format, but will be parsed as YAML. Multi-document
                       YAML is supported.

options:
  -h, --help           show this help message and exit
  -j, --json           Output a JSON-formatted model.
  --ms REFERENCE_SIZE  Output ms command line arguments, using the given
                       reference population size (N0) to translate into
                       coalescent units (see the &#39;ms&#39; subcommand for
                       interpretation of this value). The sampling
                       configuration in the output will need editing prior to
                       simulation. The order of deme IDs matches the order of
                       demes in the input model.
  -s, --simplified     Output a simplified model. This is a compact
                       representation in which many default values are
                       omitted. As only the essential details are retained,
                       this is usually easier for humans to read. The
                       simplified output is guaranteed to be a valid Demes
                       model that can be resolved identically to the input
                       model. But exactly which fields are simplified, and how
                       simplification is performed, may change over time. Thus
                       users should not rely on details of the output such as
                       presence or absence of specific fields, or other
                       details that do not alter how the model is resolved. A
                       fully-resolved model is output by default.
</pre></div>
</div>
</section>
<section id="demes-ms">
<span id="sec-cli-ms"></span><h2>demes ms<a class="headerlink" href="#demes-ms" title="Permalink to this headline">#</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>usage: demes ms [-h] -N0 REFERENCE_SIZE [-f filename] [-I num_demes [n1 ...]]
                [-n i x] [-g i alpha] [-G alpha] [-m i j rate]
                [-ma entry [entry ...]] [-eG t alpha] [-eg t i alpha]
                [-eN t x] [-en t i x] [-eM t x] [-em t i j rate]
                [-ema t [entry ...]] [-es t i p] [-ej t i j]

Build a Demes model from commands accepted by Hudson&#39;s classic ms simulator.
https://doi.org/10.1093/bioinformatics/18.2.337

Ms commands correspond to a backwards-time model of population dynamics,
and use coalescent units for times t, population sizes x, and migration
rates m. These are converted to more familiar units using the reference
size N0 according to the following rules:

 - time (in generations) = 4 * N0 * t,
 - deme size (diploid individuals) = N0 * x,
 - migration rate (per generation) = m / (4 * N0).

Deme IDs are 1-based, and migration matrix entry M[i, j] is the
forwards-time fraction of deme i which is made up of migrants from
deme j each generation.

Please refer to the ms manual for the precise semantics of each command.
http://home.uchicago.edu/~rhudson1/source/mksamples.html

options:
  -h, --help            show this help message and exit

required arguments:
  -N0 REFERENCE_SIZE, --reference-size REFERENCE_SIZE
                        The reference population size used to translate from
                        coalescent units. For an existing ms command, this can
                        be calculated as theta / (4 * mu * L), where theta is
                        the value given to the -t option, mu is the per-
                        generation mutation rate, and L is the length of the
                        sequence being simulated.

ms arguments:
  -f filename           Insert commands from a file at this point in the
                        command line.
  -I num_demes [n1 ...]
                        Set the number of demes and the sampling
                        configuration. The arguments are of the form
                        &#39;num_demes n1 n2 ... [4N0m]&#39;, specifying the number of
                        demes, the sample configuration, and optionally, the
                        migration rate for a symmetric island model (in units
                        of 4 * N0). While values must be provided for the
                        sample configuration, they are not used for
                        constructing the Demes model.
  -n i x                Set the size of deme i to x * N0.
  -g i alpha            Set the growth rate of deme i to alpha.
  -G alpha              Set the growth rate to alpha for all demes.
  -m i j rate           Sets an entry M[i, j] in the migration matrix to the
                        specified rate. i and j are (1-indexed) deme IDs.
  -ma entry [entry ...]
                        Sets the migration matrix from the specified vector of
                        values. The entries are in the order M[1, 1], M[1, 2],
                        ..., M[2, 1], M[2, 2], ..., M[N, N], where N is the
                        number of demes. Diagonal entries may be written as
                        &#39;x&#39;.
  -eG t alpha           Set the growth rate for all demes to alpha at time t.
  -eg t i alpha         Set the growth rate of deme i to alpha at time t.
  -eN t x               Set the size of all demes to x * N0 at time t.
  -en t i x             Set the size of deme i to x * N0 at time t.
  -eM t x               Set the symmetric island model migration rate to &#39;x /
                        (num_demes - 1)&#39; at time t.
  -em t i j rate        Sets the entry M[i, j] in the migration matrix to the
                        specified rate at time t. i and j are (1-indexed) deme
                        IDs.
  -ema t [entry ...]    Sets the migration matrix from the specified vector of
                        values at time t. The entries are in the order M[1,
                        1], M[1, 2], ..., M[2, 1], M[2, 2], ..., M[N, N],
                        where N is the number of demes. Diagonal entries may
                        be written as &#39;x&#39;.
  -es t i p             Split deme i into a new deme, such that the specified
                        proportion p of lineages remains in deme i. The new
                        deme has ID num_demes + 1, and has size N0, growth
                        rate 0, and migration rates to and from the new deme
                        are set to 0. Forwards in time this corresponds to an
                        admixture event with the extinction of the new deme.
  -ej t i j             Move all lineages in deme i to j at time t. All
                        migration rates for deme i are set to zero. Forwards
                        in time, this corresponds to a branch event in which
                        lineages in j split into i.
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="api.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">API Reference</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="development.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Development</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By PopSim Consortium<br/>
  
      &copy; Copyright 2021.<br/>
    <div class="extra_footer">
      demes 0.2.3.dev58
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>